# Введение Matrix Multiplication

Лабораторная работа находится в файле kernel.cu
Этот файл разделен на 3 основных блока:
1. Блок параметров
2. Блок функций
3. Основной блок

# Блок параметров

В данном блоке находятся параметры для регулировки программы:
1. RofF - отвечает за заполнение матрицы рандомными числами или же через файл (использовалось для отладки)
2. IorD - отвечает за тип рандомных чисел (int или double)
3. allText - отвечает за отображение всего текста (!не влияет на время выполнения работы)
4. inputText - отвечает за отображение входных матриц
5. outputText - отвечает за отображение выходной матрицы
6. mode - отвечает за режим работы программы (0 - CPU, 1 - GPU, 2 - CPU и GPU)
7. check - отвечает за возможность проверки данных после расчета на GPU
8. range - отвечает за диапазон рандомных значений (если поставить два нуля, то будет ограничений не будет)
9. sizeA - отвечает за размер матрицы А
10. sizeB - отвечает за размер матрицы B
11. block_size - отвечает за колличество потоков в блоке

# Основной блок и блок функций

В данных блоках содержится основной код программы, а именно реализация инициализации матриц, и две основные функии **matrixMulCPU** и **matrixMulGPU**.
- matrixMulCPU - выполняет последовательный рассчет на CPU.
- matrixMulGPU - выполняет параллельный расчет на GPU.

Распараллеливание просиходило в момент времени, когда нужно было рассчитывать элемент произведения матриц А и В. Это позволяет достигнуть максимально возможной скорости вычисления. Так как одновременно может рассчитываться множество эллементов.

# Сводная таблица

Ниже представлена сводная таблица, в которой находится зависимость времени выполнения работы программы от размера матриц
###### (!Матрицы использовались квадратные и одинакового размера, тип данных - int, диапзаон от -100 до 100)
| Размер Матриц | CPU Общее | CPU Рассчета | GPU Общее | GPU Рассчета |  Ускорение  |
|:-------------:|:---------:|:------------:|:---------:|:------------:|:-----------:|
|       64      |   0,005   |     0,003    |   1,814   |     0,002    |  0,00275634 |
|      128      |   0,044   |     0,035    |   2,082   |     0,001    | 0,021133525 |
|      256      |   1,119   |     1,088    |   1,802   |     0,001    | 0,620976693 |
|      512      |   7,284   |     7,065    |   2,192   |     0,001    | 3,322992701 |
|      1024     |   41,571  |    40,654    |   4,669   |     0,003    | 8,903619619 |
|      2048     |  409,126  |    403,861   |   8,344   |     0,003    | 49,03235858 |
###### (!Время указано в секундах)

Ниже представлены графики зависимости, составленные по таблице
![CPU](https://user-images.githubusercontent.com/31400073/194624612-3683dfd0-4b2e-4ca4-b42a-f6f08390893a.png)

![GPU](https://user-images.githubusercontent.com/31400073/194624626-1dd16c18-edc6-406c-a96d-3abb8d688959.png)

![acc](https://user-images.githubusercontent.com/31400073/194624753-30a4d091-47ea-4906-9e32-fb0da780f4aa.png)

А также ниже представлен пример из консоли, где перемножались две матрицы размером 8192 x 8192 элемента. 
###### Здесь отчетливо видна разница во времени расчетов.

![example](https://user-images.githubusercontent.com/31400073/194625504-23bed79a-c5ad-477a-b7b3-a9ab5de5900d.jpg)
