# Введение Sum of vectors

Лабораторная работа находится в файле kernel.cu
Этот файл разделен на 3 основных блока:
1. Блок параметров
2. Блок функций
3. Основной блок

# Блок параметров

В данном блоке находятся параметры для регулировки программы:
1. RofF - отвечает за заполнение векторов рандомными числами или же через файл (использовалось для отладки)
2. IorD - отвечает за тип рандомных чисел (int или double)
3. allText - отвечает за отображение всего текста (!не влияет на время выполнения работы)
4. inputText - отвечает за отображение входных векторов
5. outputText - отвечает за отображение выходного вектора
6. mode - отвечает за режим работы программы (0 - CPU, 1 - GPU, 2 - CPU и GPU)
7. check - отвечает за возможность проверки данных после расчета на GPU
8. range - отвечает за диапазон рандомных значений (если поставить два нуля, то будет ограничений не будет)
9. vector_size - отвечает за размер векторов
10. block_size - отвечает за колличество потоков в блоке

# Основной блок и блок функций

В данных блоках содержится основной код программы, а именно реализация инициализации матриц, и две основные функии **vectorAddCPU** и **vectorAddGPU**.
- vectorAddCPU - выполняет последовательный рассчет на CPU.
- vectorAddGPU - выполняет параллельный расчет на GPU.

Распараллеливание просиходило в момент времени, когда нужно было рассчитывать элемент сложения векторов А и В. Это позволяет достигнуть максимально возможной скорости вычисления. Так как одновременно может рассчитываться множество эллементов. Разницу в скорости вычисления можно заметить только тогда, когда используется большой набор данных, в противном случае, скорость CPU оказывается быстрее.

# Сводная таблица

Ниже представлена сводная таблица, в которой находится зависимость времени выполнения работы программы от размера векторов
###### (!Вектора использовались одинакового размера для CPU и GPU, тип данных - int, диапзаон от -100 до 100)
| Размер векторов | CPU Общее | CPU Рассчета | GPU Общее | GPU Рассчета |  Ускорение  |
|:---------------:|:---------:|:------------:|:---------:|:------------:|:-----------:|
|       1024      |  0,000714 |   0,000009   |   1,404   |    0,00011   | 0,000508547 |
|      16384      |  0,010314 |   0,000286   |   2,563   |   0,000155   |  0,00402419 |
|      131072     |  0,093378 |   0,000778   |   1,471   |   0,000123   | 0,063479266 |
|     1048576     |  0,841161 |   0,011566   |   4,405   |   0,000134   | 0,190955959 |
|     16777216    |   12,734  |   0,093138   |   21,154  |   0,000099   | 0,601966531 |
###### (!Время указано в секундах)

Ниже представлены графики зависимости, составленные по таблице
![CPU](https://user-images.githubusercontent.com/31400073/196506449-b63855ec-391c-4673-9da5-32707f545c92.png)

![GPU](https://user-images.githubusercontent.com/31400073/196506505-e10fb589-59b8-45b3-a8d8-05c53131dd13.png)

![asc](https://user-images.githubusercontent.com/31400073/196506525-9374a411-3452-48c6-8803-cbd3d778090b.png)

А также ниже представлен пример из консоли, где складывались два вектора размером 16777216 элементов. 
###### Здесь отчетливо видна разница во времени расчетов.

![console](https://user-images.githubusercontent.com/31400073/196506547-42ca1023-904a-4f70-98f4-b85df65fdcff.jpg)

